# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

# Specifies the build process for the backend.
build:
  # The command to install dependencies.
  install: npm install
  # The command to build the Next.js application.
  run: npm run build

# Specifies the runtime configuration for the backend.
runConfig:
  # Increase this value if you'd like to automatically spin up
  # more instances in response to increased traffic.
  maxInstances: 3

  # Minimum instances to keep warm (0 = scale to zero)
  minInstances: 0

  # Memory allocation per instance
  memory: 1GiB

  # CPU allocation per instance
  cpu: 1

  # Environment variables for the runtime
  env:
    # ==========================================
    # SCRAPTPRESS API (Copart Scraping Backend)
    # ==========================================
    - variable: SCRAPTPRESS_API_URL
      value: https://scrap.sumtrading.us
      availability:
        - BUILD
        - RUNTIME

    - variable: SCRAPTPRESS_API_KEY
      value: a3f207ff5225d4fed2c8a7b331ffc0f3da0f1f106e113bd0840bf9c46cbbb35b
      availability:
        - BUILD
        - RUNTIME

    # ==========================================
    # FIREBASE CLIENT SDK (Public keys for browser)
    # ==========================================
    - variable: NEXT_PUBLIC_FIREBASE_API_KEY
      value: AIzaSyCMPo6KOSAgNYIDwh1aI72bLQoosYhNaZM
      availability:
        - BUILD

    - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
      value: studio-6719476275-3891a.firebaseapp.com
      availability:
        - BUILD

    - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
      value: studio-6719476275-3891a
      availability:
        - BUILD

    - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
      value: studio-6719476275-3891a.firebasestorage.app
      availability:
        - BUILD

    - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
      value: "901398474203"
      availability:
        - BUILD

    - variable: NEXT_PUBLIC_FIREBASE_APP_ID
      value: 1:901398474203:web:5306530ecc7c8b2e390bfe
      availability:
        - BUILD


    # ==========================================
    # FIREBASE ADMIN SDK (Server-side)
    # ==========================================
    # Service account JSON for Firebase Admin operations
    - variable: FIREBASE_SERVICE_ACCOUNT_JSON
      secret: FIREBASE_SERVICE_ACCOUNT_JSON
      availability:
        - RUNTIME

    # ==========================================
    # STRIPE PAYMENT CONFIGURATION
    # ==========================================
    # Stripe publishable key (client-side, public)
    - variable: NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
      value: pk_test_51SGPcIBh7oiw3HEvk74l9JgjyaIV2TqtPTp2JFiRLwlgrXShRnAcfVA5VyHXufzLrOYvTPI3A2u9TTYMr6R8FD2S00ZKiDMHjg
      availability:
        - BUILD
        - RUNTIME

    # Stripe secret key (server-side, MUST be secret)
    - variable: STRIPE_SECRET_KEY
      secret: STRIPE_SECRET_KEY
      availability:
        - RUNTIME

    # Stripe webhook secret (server-side, MUST be secret)
    - variable: STRIPE_WEBHOOK_SECRET
      secret: STRIPE_WEBHOOK_SECRET
      availability:
        - RUNTIME

    # ==========================================
    # AI / CHATBOT CONFIGURATION
    # ==========================================
    # Google Gemini API Key for chatbot functionality
    # ==========================================
    # AI / CHATBOT CONFIGURATION
    # ==========================================
    # Google Gemini API Key for chatbot functionality
    # IMPORTANTE: En producci√≥n, configura esto como SECRET en Firebase Console
    - variable: GEMINI_API_KEY
      secret: GEMINI_API_KEY
      availability:
        - RUNTIME

    # ==========================================
    # ANALYTICS
    # ==========================================
    - variable: NEXT_PUBLIC_DISABLE_ANALYTICS
      value: "true"
      availability:
        - BUILD
        - RUNTIME

    # Microsoft Clarity API Token for analytics export
    - variable: CLARITY_API_TOKEN
      secret: CLARITY_API_TOKEN
      availability:
        - RUNTIME
